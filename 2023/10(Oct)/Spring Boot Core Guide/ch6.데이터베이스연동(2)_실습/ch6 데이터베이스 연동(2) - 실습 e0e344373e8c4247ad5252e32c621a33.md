# ch6. ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™(2) - ì‹¤ìŠµ

### 0. ì‹¤ìŠµ ìˆœì„œ ì‘ì„± ë° íë¦„ ì¡ê¸°

1. ë°ì´í„°ë² ì´ìŠ¤(MySQL ë° MariaDB)ì„¤ì¹˜
2. Database CREATE
3. ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ìƒì„± ë° ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
4. ì—”í‹°í‹° ì„¤ê³„ (ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰Runì‹œ ì—°ë™ëœ Databaseì— ì‘ì„±ë  Table ì„¤ê³„)
5. ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„ (ë°ì´í„°ë² ì´ìŠ¤ì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì†Œí†µí•  ìˆ˜ ìˆëŠ” ë„êµ¬ ì„¤ê³„)
    
    
    | ì—”í‹°í‹° | ë°ì´í„°ë² ì´ìŠ¤ì˜ í…Œì´ë¸”ê³¼ êµ¬ì¡° ìƒì„±í•˜ëŠ” í™œìš©ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ |
    | --- | --- |
    | ë¦¬í¬ì§€í† ë¦¬ | ì—”í‹°í‹°ê°€ ìƒì„±í•œ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ì— í™œìš©ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ |
6. DAOì„¤ê³„
7. DAO ì—°ë™ì„ ìœ„í•œ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì„œë¹„ìŠ¤ ì„¤ê³„

### 1. ë°ì´í„° ë² ì´ìŠ¤ ì„¤ì¹˜

<aside>
ğŸ—£ï¸ ì €ëŠ” ê¸°ì¡´ì— ì„¤ì¹˜ë˜ì–´ìˆëŠ” Mysqlê³¼ MysqlWorkBenchë¥¼ í™œìš©í•´ ì‘ì—…í–ˆìŠµë‹ˆë‹¤. 
MariaDB ë° MySQL ì„¤ì¹˜ ë° ì‹¤í–‰ ì‘ì—…ì„ í•˜ë©° ì°¾ì€ ë¬¸ì„œë¥¼ ì •ë¦¬í•´ë†“ì•˜ìœ¼ë‹ˆ ì°¸ê³ í•˜ì„¸ìš”!

</aside>

- M1 MariaDB ì„¤ì¹˜ ~ GUI í™˜ê²½ì—ì„œ ì‚¬ìš© : [https://leading-engineer.tistory.com/32](https://leading-engineer.tistory.com/32)
- M1 ë§¥ - MySQL Workbench ì˜¤ë¥˜ í•´ê²°ë²• : [https://coder-angrybird.tistory.com/28](https://coder-angrybird.tistory.com/28)
- Mysql workbench ì„¤ì¹˜ ë° ì‚¬ìš©í•˜ê¸°: [https://dearmycode.tistory.com/15](https://dearmycode.tistory.com/15)
- MySql ì„¤ì¹˜ ì°¸ê³  ë¬¸ì„œ : [https://clolee.tistory.com/49](https://clolee.tistory.com/49)
- MySql ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì°¸ê³ ë¬¸ì„œ : [https://velog.io/@sorzzzzy/MySQL-Mac-MySQL-root-ë¹„ë°€ë²ˆí˜¸-ì´ˆê¸°í™”í•˜ê¸°](https://velog.io/@sorzzzzy/MySQL-Mac-MySQL-root-%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EC%B4%88%EA%B8%B0%ED%99%94%ED%95%98%EA%B8%B0)

### 2. MySQL WorkBench ì‹¤í–‰ ë° ë°ì´í„°ë² ì´ìŠ¤ CREATE

1) MySQL WorkBenchì—ì„œ new connection ì„¤ì •í•˜ê¸°

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-10-21 á„‹á…©á„’á…® 7.52.43.png](ch6%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%83%E1%85%A9%E1%86%BC(2)%20-%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%89%E1%85%B3%E1%86%B8%20e0e344373e8c4247ad5252e32c621a33/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-21_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_7.52.43.png)

Password : ì´ˆê¸° MySQL ì„¤ì •ì‹œ ì„¤ì •í•œ ë¹„ë²ˆ

2) Springboot ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± ì¿¼ë¦¬

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-10-21 á„‹á…©á„’á…® 8.22.26.png](ch6%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%83%E1%85%A9%E1%86%BC(2)%20-%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%89%E1%85%B3%E1%86%B8%20e0e344373e8c4247ad5252e32c621a33/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-21_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.22.26.png)

```java
CREATE DATABASE springboot;
```

### 3. ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ìƒì„± ë° ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™

 **1) ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ìƒì„±**

- groupId: com.springboot
- name: jpa
- artifactId: jpa
- Dependencies
    - Developer Tools: Lombok, Spring Configuration Processor
    - Web: Spring Web
    - SQL: Spring Data JPA, MySql Driver

 **2) ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™**

- application.propertiesì— ì‘ì„±
- ì°¸ê³ ìë£Œ) [https://velog.io/@wkdgus7113/Spring-boot-MySQL-ì—°ë™](https://velog.io/@wkdgus7113/Spring-boot-MySQL-%EC%97%B0%EB%8F%99)

```java
# server
server.port=8080

# jpa mysql
spring.jpa.database=mysql
spring.datasource.url=jdbc:mysql://localhost:3306/{ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.username={root}
spring.datasource.password={password}

# jpa common
spring.jpa.hibernate.ddl-auto=create
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
```

- # jpa common
    
    Hibernate ì‚¬ìš©í•  ë•Œ í™œì„±í™”í•  ìˆ˜ ìˆëŠ” ì„ íƒ ì‚¬í•­
    
    - ddl-auto: ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ì¡°ì‘í•˜ëŠ” ì˜µì…˜
    - show-sql : í•˜ì´ë²„ë„¤ì´íŠ¸ê°€ ìƒì„±í•œ ì¿¼ë¦¬ë¬¸ ì¶œë ¥ ì˜µì…˜ - format_sql : ì‚¬ëŒì´ ë³´ê¸° ì¢‹ê²Œ í¬ë§¤íŒ…
    
- ddl-auto ì˜µì…˜
    
    [ ê°œë°œ í™˜ê²½ì—ì„œë§Œ í™œìš© ]
    
    - create: ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê°€ë™ë˜ê³  SessionFactoryê°€ ì‹¤í–‰ë  ë•Œ ê¸°ì¡´ í…Œì´ë¸” ì§€ìš°ê³  ìƒˆë¡œ ìƒì„±
    (ì¦‰, entityí´ë˜ìŠ¤ ì‘ì„±í•˜ë©´ runí•  ë•Œ ìë™ìœ¼ë¡œ í…Œì´ë¸” ìƒì„±)
    - create-drop: createì™€ ë™ì¼í•œ ê¸°ëŠ¥ ìˆ˜í–‰í•˜ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¢…ë£Œí•˜ëŠ” ì‹œì ì— í…Œì´ë¸” ì‚­ì œ
    - update: SessionFactoryê°€ ì‹¤í–‰ë  ë•Œ ê°ì²´ë¥¼ ê²€ì‚¬í•´ì„œ ë³€ê²½ëœ ìŠ¤í‚¤ë§ˆ ê°±ì‹ /ê¸°ì¡´ì— ì €ì¥ëœ ë°ì´í„° ìœ ì§€
    - ì˜ëª»í•˜ë‹¤ê°€ ì‹¤ì œ ìš´ì˜í™˜ê²½ ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´ê¹Œì§€ ë³€ê²½ ê°€ëŠ¥í•´ì„œ ê°œë°œì—ë§Œ í™œìš©
    
    ---
    
    [ ìš´ì˜ í™˜ê²½ì—ì„œ í™œìš© ]
    
    - validate: updateì²˜ëŸ¼ ê°ì²´ ê²€ì‚¬í•˜ë˜ ìŠ¤í‚¤ë§ˆ ê±´ë“œë¦¬ì§€ ì•ŠìŒ/ ê²€ì‚¬ê³¼ì • ì¤‘ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ì •ë³´ì™€ ê°ì²´ ì •ë³´ ë‹¤ë¥¼ì‹œ ì—ëŸ¬
    - none: ddl-autoê¸°ëŠ¥ ì‚¬ìš©X
    

### 4. ì—”í‹°í‹° ì„¤ê³„

- ì—”í‹°í‹°: ë°ì´í„°ë² ì´ìŠ¤ì˜ í…Œì´ë¸”ì— ëŒ€ì‘í•˜ëŠ” í´ë˜ìŠ¤
- Spring Data JPA ì‚¬ìš©ì‹œ, ê°œë°œì ëŒ€ì‹  ì—”í‹°í‹° í´ë˜ìŠ¤ë¥¼ í†µí•´ í…Œì´ë¸” ìƒì„± ë° ì—°ê´€ê´€ê³„ ì •ì˜

![IMG_2143.jpg](ch6%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%83%E1%85%A9%E1%86%BC(2)%20-%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%89%E1%85%B3%E1%86%B8%20e0e344373e8c4247ad5252e32c621a33/IMG_2143.jpg)

```java
package com.springboot.jpa.data.entity;

import jakarta.persistence.*;

import java.time.LocalDate;
import java.time.LocalDateTime;

@Entity
@Table(name = "product")
public class Product {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long number;

    @Column(nullable = false)
    private String name;

    @Column(nullable = false)
    private Integer price;

    @Column(nullable = false)
    private Integer stock;

    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;

   //..getter&setterë©”ì†Œë“œ

}
```

- `@Entity`
    - í•´ë‹¹ í´ë˜ìŠ¤ê°€ ì—”í‹°í‹°ì„ì„ ëª…ì‹œí•˜ê¸° ìœ„í•œ ì–´ë…¸í…Œì´ì…˜
    - í´ë˜ìŠ¤ ìì²´ëŠ” í…Œì´ë¸”ê³¼ 1:1ë¡œ ë§¤ì¹­
    - í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤(ë©¤ë²„ ë³€ìˆ˜) = í…Œì´ë¸”ì—ì„œ í•˜ë‚˜ì˜ ë ˆì½”ë“œ

- `@Table`
    - ì—”í‹°í‹° í´ë˜ìŠ¤ ì´ë¦„ê³¼ í…Œì´ë¸” ì´ë¦„ì„ ë‹¤ë¥´ê²Œ ì§€ì •í•˜ëŠ” ê²½ìš°ì— í•œì •í•˜ì—¬ ì‚¬ìš©
    - ì¦‰, @Table ì—†ìœ¼ë©´ í…Œì´ë¸” ì´ë¦„ = í´ë˜ìŠ¤ ì´ë¦„

- `@Id`
    - @Idê°€ ë¶™ì€ í•„ë“œëŠ” í…Œì´ë¸”ì˜ ê¸°ë³¸ê°’(PK) ì—­í• 
    - ëª¨ë“  EntityëŠ” @Id ë°˜ë“œì‹œ í•„ìš”
    
- `@GeneratedValue`
    - `@Id` ì™€ í•¨ê»˜ ì‚¬ìš©
    - `@GeneratedValue`ë¶™ì€ í•„ë“œì˜ ê°’ì„ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ìë™ ìƒì„±í• ì§€ ì˜µì…˜ ë¶€ì—¬
        
        
        | GenratedValue ì‚¬ìš©X
        (ì§ì ‘ í• ë‹¹) | - ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ìì²´ì ìœ¼ë¡œ ê³ ìœ í•œ ê¸°ë³¸ ê°’ ìƒì„±í•  ê²½ìš°
        - ë‚´ë¶€ì— ì •í•´ì§„ ê·œì¹™ì— ì˜í•´ ê¸°ë³¸ê°‘ ìƒì„± ë° ì‹ë³„ìë¡œ ì‚¬ìš© |
        | --- | --- |
        | AUTO | @GenratedValueì˜ ê¸°ë³¸ ì„¤ì •ê°’
        - ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ë§ê²Œ ìë™ìƒì„± |
        | IDENTITY | - ê¸°ë³¸ê°’ ìƒì„±ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ìœ„ì„í•˜ëŠ” ë°©ì‹
        - ë°ì´í„°ë² ì´ìŠ¤ì˜ AUTO_INCREMENTë¥¼ ì‚¬ìš©í•´ ê¸°ë³¸ê°’ ìƒì„±  |
        | SEQUENCE | @SequenceGenrator ë¡œ ì‹ë³„ì ìƒì„±ê¸° ì„¤ì • / ê°’ ìë™ ì£¼ì…
        - SequenceGeneratorë¥¼ ì •ì˜ ì‹œ name, sequenceName, allocationSizeë¥¼ í™œìš©
        - @GenerateValueì— ìƒì„±ê¸° ì„¤ì • |
        | TABLE | - ì–´ë–¤ DBMS ì‚¬ìš©í•˜ë”ë¼ë„ ë™ì¼í•˜ê²Œ ë™ì‘í•˜ê¸° ì›í•˜ëŠ” ê²½ìš° ì‚¬ìš©
        - ì‹ë³„ìë¡œ ì‚¬ìš©í•  ìˆ«ìì™€ ë³´ê´€ í…Œì´ë¸”ì„ ë³„ë„ ìƒì„± â†’ Entity ìƒì„±í•  ë•Œë§ˆë‹¤ ê°’ ê°±ì‹ í•˜ì—¬ ì‚¬ìš©
        - @TableGeneratorë¡œ í…Œì´ë¸” ì •ë³´ ì„¤ì • |

- `@Column`
    - í…Œì´ë¸” Columnì— ë¶€ê°€ì ì¸ ì„¤ì • ì¶”ê°€
    - ë³„ë‹¤ë¥¸ ì„¤ì • í•„ìš” ì—†ì„ ì‹œ, ìƒëµê°€ëŠ¥
        
        
        | name | - ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¹¼ëŸ¼ëª… ì„¤ì •
        - ëª…ì‹œí•˜ì§€ ì•Šìœ¼ë©´ í•„ë“œëª…ìœ¼ë¡œ ì§€ì • |
        | --- | --- |
        | nullable | ë ˆì½”ë“œ ìƒì„±ì‹œ, ì¹¼ëŸ¼ ê°’ì— null ì²˜ë¦¬ ê°€ëŠ¥ ì—¬ë¶€ |
        | length | ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥í•˜ëŠ” ë°ì´í„° ìµœëŒ€ ê¸¸ì´ ì„¤ì • |
        | uniqe | í•´ë‹¹ ì»¬ëŸ¼ unique ì—¬ë¶€ ì„¤ì • |

- `@Transient`
    - ì—”í‹°í‹° í´ë˜ìŠ¤ì—ëŠ” ì„ ì–¸ë˜ì–´ìˆëŠ” í•„ë“œì§€ë§Œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œëŠ” í•„ìš”ì—†ëŠ” ê²½ìš°
    

### 5. ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„

- ë¦¬í¬ì§€í† ë¦¬ : Spring Data JPAê°€ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤
- Spring Data JPA
: jpaRepositoryê¸°ë°˜ â†’ ê¸°ì¡´ ë©”ì„œë“œ ì†ì‰½ê²Œ í™œìš© â†’ ë”ìš± ì‰½ê²Œ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì•„í‚¤í…ì²˜ ì œê³µ
- ë¦¬í¬ì§€í† ë¦¬ì˜ ìš©ë„
    
    
    | ì—”í‹°í‹° | ë°ì´í„°ë² ì´ìŠ¤ì˜ í…Œì´ë¸”ê³¼ êµ¬ì¡° ìƒì„±í•˜ëŠ” í™œìš©ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ |
    | --- | --- |
    | ë¦¬í¬ì§€í† ë¦¬ | ì—”í‹°í‹°ê°€ ìƒì„±í•œ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ì— í™œìš©ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ |

- ë¦¬í¬ì§€í† ë¦¬ ìƒì„±
    
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-10-22 á„‹á…©á„’á…® 6.17.38.png](ch6%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%83%E1%85%A9%E1%86%BC(2)%20-%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%89%E1%85%B3%E1%86%B8%20e0e344373e8c4247ad5252e32c621a33/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_6.17.38.png)
    
    ```java
    package com.springboot.jpa.data.repository;
    
    import com.springboot.jpa.data.entity.Product;
    import org.springframework.data.jpa.repository.JpaRepository;
    
    public interface ProductRepository extends JpaRepository<Product, Long> {
    
    }
    ```
    
    - ProductRepositoryê°€ JpaRepository ìƒì†ë°›ì„ ë•Œ ëŒ€ìƒ ì—”í‹°í‹°ì™€ ê¸°ë³¸ê°’ íƒ€ì… ì§€ì •
    - ëŒ€ìƒ ì—”í‹°í‹°: Product
    - ê¸°ë³¸ê°’ íƒ€ì…: `@Id` í•„ë“œíƒ€ì…ì¸ Long
- Jpa Repository ìƒì† êµ¬ì¡°
    
    ```java
    package org.springframework.data.jpa.repository;
    
    importë¬¸..
    
    @NoRepositoryBean
    public interface JpaRepository<T, ID> extends ListCrudRepository<T, ID>, ListPagingAndSortingRepository<T, ID>, QueryByExampleExecutor<T> {
        void flush();
    
        <S extends T> S saveAndFlush(S entity);
    
        <S extends T> List<S> saveAllAndFlush(Iterable<S> entities);
    
        /** @deprecated */
        @Deprecated
        default void deleteInBatch(Iterable<T> entities) {
            this.deleteAllInBatch(entities);
        }
    
        void deleteAllInBatch(Iterable<T> entities);
    
        void deleteAllByIdInBatch(Iterable<ID> ids);
    
        void deleteAllInBatch();
    
        /** @deprecated */
        @Deprecated
        T getOne(ID id);
    
        /** @deprecated */
        @Deprecated
        T getById(ID id);
    
        T getReferenceById(ID id);
    
        <S extends T> List<S> findAll(Example<S> example);
    
        <S extends T> List<S> findAll(Example<S> example, Sort sort);
    }
    ```
    
    ![IMG_F7F4A5786CF1-1.jpeg](ch6%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%83%E1%85%A9%E1%86%BC(2)%20-%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%89%E1%85%B3%E1%86%B8%20e0e344373e8c4247ad5252e32c621a33/IMG_F7F4A5786CF1-1.jpeg)
    
- ë¦¬í¬ì§€í† ë¦¬ ë©”ì„œë“œ ìƒì„± ê·œì¹™
    - ì»¤ìŠ¤í…€ ë©”ì„œë“œ ìƒì„± - ì£¼ë¡œ Read ë¶€ë¶„ì— í•´ë‹¹í•˜ëŠ” Select ì¿¼ë¦¬
    - ë©”ì„œë“œì— ì´ë¦„ ë¶™ì¼ ë•ŒëŠ” ì²« ë‹¨ì–´ë¥¼ ì œì™¸í•œ ì´í›„ ë‹¨ì–´ë“¤ì˜ ì²«ê¸€ìë¥¼ ë°˜ë“œì‹œ â€œëŒ€ë¬¸ìâ€ë¡œ ì„¤ì •
    
    | FindBy | SQLë¬¸ì˜ whereì ˆ ìˆ˜í–‰êµ¬ë¬¸/ findBy ë’¤ì— ì—”í‹°í‹°ì˜ í•„ë“œê°’ ì…ë ¥í•´ì„œ ì‚¬ìš©
    ì˜ˆ) findByName (String name) |
    | --- | --- |
    | AND, OR | ì¡°ê±´ì„ ì—¬ëŸ¬ê°œ ì„¤ì •í•˜ê¸° ìœ„í•´ ì‚¬ìš©
    ì˜ˆ) findByNameAndEmail (String name, String email) |
    | Like/NotLike | - SQLë¬¸ì˜ likeì™€ ë™ì¼í•œ ê¸°ëŠ¥ ìˆ˜í–‰/ íŠ¹ì • ë¬¸ì í¬í•¨ì—¬ë¶€ë¥¼ ì¡°ê±´ìœ¼ë¡œ ì¶”ê°€
    - ë¹„ìŠ·í•œ í‚¤ì›Œë“œë¡œ Containing, Contains, isContaing |
    | StartsWith/StartingWith | íŠ¹ì • í‚¤ì›Œë“œë¡œ ì‹œì‘í•˜ëŠ” ë¬¸ìì—´ ì¡°ê±´ ì„¤ì • |
    | EndsWith/EndingWith | íŠ¹ì • í‚¤ì›Œë“œë¡œ ëë‚˜ëŠ” ë¬¸ìì—´ ì¡°ê±´ ì„¤ì • |
    | IsNull/IsNotNull | ë ˆì½”ë“œ ê°’ì´ Nullì´ê±°ë‚˜ Nullì´ ì•„ë‹Œ ê°’ì„ ê²€ìƒ‰í•  ë•Œ ì‚¬ìš© |
    | True/False | Boolean íƒ€ì…ì˜ ë ˆì½”ë“œ ê²€ìƒ‰ì‹œ ì‚¬ìš© |
    | Before/After | ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ê°’ì„ ê²€ìƒ‰ |
    | LessThan/GreaterThan | íŠ¹ì • ê°’(ìˆ«ì)ì„ ê¸°ì¤€ìœ¼ë¡œ ëŒ€ì†Œ ë¹„êµí•  ë•Œ ì‚¬ìš© |
    | Between | ë‘ ê°’(ìˆ«ì)ì‚¬ì´ì˜ ë°ì´í„° ì¡°íšŒ |
    | OrderBy | SQLë¬¸ì—ì„œ order byì™€ ë™ì¼í•œ ê¸°ëŠ¥ ìˆ˜í–‰
    ì˜ˆ) ê°€ê²© ìˆœìœ¼ë¡œ ì´ë¦„ ì¡°íšŒ - List<Product> findByNameOrderByPriceAsc; |
    | countBy | SQLë¬¸ì˜ countì™€ ë™ì¼í•œ ê¸°ëŠ¥ ìˆ˜í–‰ - ê²°ê´ê°’ì˜ ê°œìˆ˜(count)ì¶”ì¶œ |

### 10-1. DAO ì„¤ê³„

- DAO(Data Access Object)
    - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ë™ì‘ ê³¼ì •ì—ì„œ ë°ì´í„° ì¡°ì‘ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ê°ì²´
    - ì„œë¹„ìŠ¤ ë ˆì´ì–´ì™€ - ë¦¬í¬ì§€í† ë¦¬ì˜ ì¤‘ê°„ ê³„ì¸µ êµ¬ì„± ì—­í• 
    - ê·œëª¨ê°€ ì‘ì€ ì„œë¹„ìŠ¤ëŠ” DAO ì„¤ê³„ì—†ì´, ë°”ë¡œ ì„œë¹„ìŠ¤ ë ˆì´ì–´ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼
    - ìŠ¤í”„ë§ ë°ì´í„° JPAì—ì„œ DAOì˜ ê°œë…ì€ ë¦¬í¬ì§€í† ë¦¬ê°€ ëŒ€ì²´
- ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ëŠ” ë©”ì„œë“œëŠ” ë¦¬í„´ê°’ìœ¼ë¡œ ë°ì´í„° ê°ì²´(ì—”í‹°í‹° ê°ì²´/DTOê°ì²´)ë¡œ ì „ë‹¬
    - ì¼ë°˜ì ìœ¼ë¡œ ì—”í‹°í‹° ê°ì²´ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ëŠ” ê³„ì¸µ
    - ë‹¤ë¥¸ ê³„ì¸µìœ¼ë¡œ ë°ì´í„° ì „ë‹¬í•  ë•ŒëŠ” DTOê°ì²´ í™œìš©
    - íšŒì‚¬ ë° ë¶€ì„œ ë³„ ìƒì´
- DAO ì„¤ê³„ ì „ì²´ ì½”ë“œ
    
    ```java
    package com.springboot.jpa.data.dao.impl;
    
    import com.springboot.jpa.data.dao.ProductDAO;
    import com.springboot.jpa.data.entity.Product;
    import com.springboot.jpa.data.repository.ProductRepository;
    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.stereotype.Component;
    
    import java.time.LocalDateTime;
    import java.util.Optional;
    
    @Component
    public class ProductDAOImpl implements ProductDAO {
        private final ProductRepository productRepository;
    
        @Autowired
        public ProductDAOImpl(ProductRepository productRepository){
            this.productRepository = productRepository;
        }
    
        @Override
        public Product insertProduct(Product product) {
            Product savedProduct = productRepository.save(product);
    
            return savedProduct;
        }
    
        @Override
        public Product selectProduct(Long number) {
            Product selectedProduct = productRepository.getById(number);
            return selectedProduct;
        }
    
        @Override
        public Product updateProductName(Long number, String name) throws Exception {
            Optional<Product> selectedProduct = productRepository.findById(number);
    
            Product updatedProduct;
            if (selectedProduct.isPresent()) {
                Product product = selectedProduct.get();
    
                product.setName(name);
                product.setUpdatedAt(LocalDateTime.now());
    
                updatedProduct = productRepository.save(product);
            } else {
                throw new Exception();
            }
    
            return updatedProduct;
        }
    
        @Override
        public void deleteProduct(Long number) throws Exception {
            Optional<Product> selectedProduct = productRepository.findById(number);
    
            if(selectedProduct.isPresent()){
                Product product = selectedProduct.get();
    
                productRepository.delete(product);
            } else {
                throw new Exception();
            }
        }
    }
    ```
    

### 10-2. DAO ì„¤ê³„ ì˜ì¡´ì„± ì£¼ì…ê³¼ ì €ì¥ ê¸°ëŠ¥

```java
package com.springboot.jpa.data.dao.impl;

//importë¬¸..

@Component
public class ProductDAOImpl implements ProductDAO {

//Repositoryì˜ì¡´ì„± ì£¼ì…
    private final ProductRepository productRepository;

    @Autowired
    public ProductDAOImpl(ProductRepository productRepository){
        this.productRepository = productRepository;
    }

//Product ì—”í‹°í‹°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ ìˆ˜í–‰
    @Override
    public Product insertProduct(Product product) {
        Product savedProduct = productRepository.save(product);

        return savedProduct;
    }
}
```

- `@Component`: ProductDAOImpl í´ë˜ìŠ¤ë¥¼ ìŠ¤í”„ë§ì´ ê´€ë¦¬í•˜ëŠ” ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê¸° ìœ„í•œ annotation
- ë‹¤ë¥¸ í´ë˜ìŠ¤ê°€ ProductDAOImplì„ í™œìš©í•œ ì˜ì¡´ì„± ì£¼ì…ì„ ëŒ€ë¹„í•´ @Componentë¥¼ ë¶™ì¸ ê²ƒ!

### 10-3. DAO ì„¤ê³„ ì¡°íšŒ ê¸°ëŠ¥

```java
package com.springboot.jpa.data.dao.impl;

//importë¬¸..

@Component
public class ProductDAOImpl implements ProductDAO {

//ì˜ì¡´ì„± ì£¼ì…ì½”ë“œì™€ ì €ì¥ ê¸°ëŠ¥ ì½”ë“œ..

//Product ì—”í‹°í‹°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ ìˆ˜í–‰
    @Override
    public Product selectProduct(Long number) {
        Product selectedProduct = productRepository.getById(number);
        return selectedProduct;
    }
}
```

- getById()
    - EntityManager.getReference() í˜¸ì¶œ â†’ ì—”í‹°í‹° ë°˜í™˜(x) í”„ë½ì‹œ ê°ì²´ ë°˜í™˜(o)
    - ì‹¤ì œ ì¿¼ë¦¬ëŠ” í”„ë½ì‹œ ê°ì²´ë¥¼ í†µí•´ ìµœì´ˆë¡œ ë°ì´í„°ì— ì ‘ê·¼í•˜ëŠ” ì‹œì ì—ì„œ ì‹¤í–‰
    - ë°ì´í„° ì¡´ì¬X â†’ EntityNotFoundException ì—ëŸ¬ ë°œìƒ
    - í”„ë¡ì‹œì— ëŒ€í•œ ì´í•´(from chatgpt)
        
        **í”„ë¡ì‹œë€ ë¬´ì—‡ì¸ê°€ìš”?**
        
        í”„ë¡ì‹œëŠ” ë§ˆì¹˜ ì§„ì§œ ë¬¼ê±´ì²˜ëŸ¼ í–‰ë™í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” ë­”ê°€ë¥¼ ëŒ€ì‹ í•˜ëŠ” ë¬¼ê±´ì´ì—ìš”. ì˜ˆë¥¼ ë“¤ì–´, ìŠˆí¼ë§ˆì¼“ì—ì„œ ë¬¼ê±´ì„ ì‚¬ê¸° ìœ„í•´ ê³„ì‚°ëŒ€ ì•ì— ê°€ë©´, ì§„ì§œ ê³„ì‚°ëŒ€ ì§ì›ì´ ì•„ë‹ˆë¼ ê³„ì‚°ëŒ€ ì•ì— ìˆëŠ” ìë™ íŒë§¤ê¸°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê±¸ ìƒê°í•´ë´ìš”. ê·¸ ìë™ íŒë§¤ê¸°ëŠ” ì§„ì§œ ê³„ì‚°ëŒ€ ì§ì›ì²˜ëŸ¼ ë¬¼ê±´ì„ ìŠ¤ìº”í•˜ê³  ê³„ì‚°ì„ í•´ ì£¼ì§€ë§Œ, ì‹¤ì œë¡œëŠ” ì‚¬ëŒì´ ì•„ë‹ˆì—ìš”. ê·¸ê²Œ í”„ë¡ì‹œì²˜ëŸ¼ ë™ì‘í•˜ëŠ” ê±°ì—ìš”.
        
        **ì™œ í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ë‚˜ìš”?**
        
        í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë¬¼ê±´ì„ ì§ì ‘ ê°€ì ¸ì˜¤ì§€ ì•Šê³ ë„ í•„ìš”í•  ë•Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ì—ìš”. ì´ëŸ° ê²ƒì„ "ëŠ¦ê²Œ ë¶ˆëŸ¬ì˜¤ê¸°"ë¼ê³  ìƒê°í•´ë´ìš”. ì§„ì§œ ê³„ì‚°ëŒ€ ì§ì›(ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ë„ì›€ì„ ì£¼ëŠ” ì—­í• )ì„ ë°”ë¡œ ë¶€ë¥´ëŠ” ëŒ€ì‹ , í”„ë¡ì‹œë¥¼ ë¨¼ì € ë¶€ë¥´ê³  í”„ë¡ì‹œëŠ” í•„ìš”í•œ ìˆœê°„ì— ì§„ì§œ ê³„ì‚°ëŒ€ ì§ì›ì„ ë¶ˆëŸ¬ì˜¤ì£ .
        
        **í”„ë¡ì‹œì™€ ë°ì´í„°ë² ì´ìŠ¤**
        
        í”„ë¡ì‹œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°ë„ ì‚¬ìš©ë¼ìš”. í”„ë¡ì‹œê°€ ë­”ê°€ ì •ë³´ë¥¼ í•„ìš”ë¡œ í•  ë•Œ, ì§„ì§œ ì •ë³´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì˜¤ì£ . ê·¸ë˜ì„œ í”„ë¡ì‹œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— ì§ì ‘ ì ‘ê·¼í•˜ì§€ ì•Šê³  í•„ìš”í•  ë•Œë§Œ ì§„ì§œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ê°œì ì—­í• ì„ í•©ë‹ˆë‹¤.
        
        **ê·¸ëŸ°ë° ì£¼ì˜í•  ì ì´ ìˆì–´ìš”!**
        
        í”„ë¡ì‹œëŠ” í•„ìš”í•œ ìˆœê°„ì— ì§„ì§œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì—, ê·¸ ì •ë³´ê°€ ì—†ìœ¼ë©´ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”. ë§Œì•½ í”„ë¡ì‹œê°€ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ë ¤ê³  í•˜ëŠ”ë° ë°ì´í„°ë² ì´ìŠ¤ì— ê·¸ ì •ë³´ê°€ ì—†ë‹¤ë©´, ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ìš”. ì´ê±¸ ìƒê°í•´ë³´ë©´ ë§ˆì¹˜ ìíŒê¸°ê°€ ë¬¼ê±´ì„ íŒ”ë ¤ê³  í•˜ëŠ”ë° ê·¸ ë¬¼ê±´ì´ ë‹¤ ë–¨ì–´ì ¸ ìˆì–´ì„œ íŒ” ìˆ˜ ì—†ëŠ” ìƒí™©ì´ë‘ ë¹„ìŠ·í•˜ì£ .
        
        ì´ëŸ° ìƒí™©ì—ì„œëŠ” ì˜ˆì™¸(ì—ëŸ¬)ê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ "EntityNotFoundException(ì—”í‹°í‹°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ ì˜ˆì™¸)"ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. ê·¸ë˜ì„œ í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•  ë•Œ, ë°ì´í„°ê°€ í•­ìƒ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
        

- findById()
    - EntityManagerì˜ find() í˜¸ì¶œ â†’ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ 1ì°¨ ìºì‹œ ì¡°íšŒ
    - (ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ) ê°’ ì¡´ì¬X â†’ ì´ë•Œ, ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°ì´í„° ì¡°íšŒ â†’ Optional ê°ì²´ ë¦¬í„´
    
- getById()ì™€ findById()ì˜ ì„±ëŠ¥ ì°¨ì´ì 
    - `getById()`Â ëŠ” í•´ë‹¹ ì—”í‹°í‹°ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ê¹Œì§„ DB ì— ì ‘ê·¼X â†’ ì„±ëŠ¥ìƒìœ¼ë¡œ ì¢€ë” ìœ ë¦¬
    - íŠ¹ì • ì—”í‹°í‹°ì˜ ID ê°’ë§Œ í™œìš©í•  ì¼ì´ ìˆë‹¤ë©´ DB ì— ì ‘ê·¼í•˜ì§€ ì•Šê³  í”„ë¡ì‹œë§Œ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì°¸ê³ ìë£Œ) [https://bcp0109.tistory.com/325](https://bcp0109.tistory.com/325)

### 10-4. DAO ì„¤ê³„ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥

```java
package com.springboot.jpa.data.dao.impl;

//importë¬¸..

@Component
public class ProductDAOImpl implements ProductDAO {

//ì˜ì¡´ì„± ì£¼ì…ì½”ë“œ..
//ì €ì¥ ê¸°ëŠ¥ ì½”ë“œ..
//ì¡°íšŒ ê¸°ëŠ¥ ì½”ë“œ..

@Override
    public Product updateProductName(Long number, String name) throws Exception {
        
				//1. ì¡°íšŒí•  Product(selectedProduct)ì •ì˜
				Optional<Product> selectedProduct = productRepository.findById(number);

				//2. Product í˜•ì‹ìœ¼ë¡œ ì—…ë°ì´íŠ¸ëœ ìƒí’ˆ(updatedProduct) ì •ì˜
        Product updatedProduct;

				//3. productRepositoryì— í•´ë‹¹ ë°ì´í„°ê°€ ìˆëŠ”ì§€ ì¡°íšŒ & ë³€ê²½ì‚¬í•­ ì €ì¥(ifë¬¸)
        if (selectedProduct.isPresent()) {
            Product product = selectedProduct.get();

            product.setName(name);
            product.setUpdatedAt(LocalDateTime.now());

            updatedProduct = productRepository.save(product);
        } else {
            throw new Exception();
        }

        return updatedProduct;
    }
```

- ìœ„ ì½”ë“œ ì„¤ëª…
    - ë°ì´í„°ì˜ ìƒí’ˆëª…ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„
    - **`Optional<Product>`:** ìë°”ì—ì„œ ë„ ê°’(Null)ì„ ë‹¤ë£¨ëŠ” ë° ë„ì›€ì„ ì£¼ëŠ” í´ë˜ìŠ¤
    - **`Optional`**ì€ ì–´ë–¤ ê°’ì´ ì¡´ì¬í•  ìˆ˜ë„ ìˆê³ , ì¡´ì¬í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆëŠ” ìƒí™©ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì»¨í…Œì´ë„ˆ
- JPAëŠ” ê°’ ê°±ì‹ í•  ë•Œ updateë¼ëŠ” í‚¤ì›Œë“œ X â†’ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ í™œìš©í•´ ê°’ ê°±ì‹ 
    - find() ì‹¤í–‰: ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°’ ê°€ì ¸ì˜¤ë©´ í•´ë‹¹ ê°ì²´ê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì¶”ê°€
    - ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ìœ ì§€ë˜ëŠ” ìƒí™©ì—ì„œ ê°ì²´ ê°’ ë³€ê²½ í›„ save() 
    â†’ JPAëŠ” ë”í‹° ì²´í¬(ë³€ê²½ ê°ì§€) ìˆ˜í–‰ 
    â†’ í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì™€ ë ˆì½”ë“œ ì—…ë°ì´íŠ¸ ì¿¼ë¦¬ ì‹¤í–‰

### 10-5. DAO ì„¤ê³„ ì‚­ì œ ê¸°ëŠ¥

```java
package com.springboot.jpa.data.dao.impl;

//importë¬¸..

@Component
public class ProductDAOImpl implements ProductDAO {

//ì˜ì¡´ì„± ì£¼ì…ì½”ë“œ..
//ì €ì¥ ê¸°ëŠ¥ ì½”ë“œ..
//ì¡°íšŒ ê¸°ëŠ¥ ì½”ë“œ..
//ìƒí’ˆëª… ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ ì½”ë“œ..

@Override
    public void deleteProduct(Long number) throws Exception {
        Optional<Product> selectedProduct = productRepository.findById(number);

        if(selectedProduct.isPresent()){
            Product product = selectedProduct.get();

            productRepository.delete(product);
        } else {
            throw new Exception();
        }
    }

}
```

- ë°ì´í„°ë² ì´ìŠ¤ ë ˆì½”ë“œ ì‚­ì œí•˜ëŠ” ë°©ë²•
    
    1) ì‚­ì œí•˜ê³ ì í•˜ëŠ” ë ˆì½”ë“œì™€ ë§¤í•‘ëœ ì˜ì† ê°ì²´ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ê°€ì ¸ì˜¤ê¸°: findById()
    
    2) ì‚­ì œ: delete()
    

### 11. DAO ì—°ë™ì„ ìœ„í•œ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì„œë¹„ìŠ¤ ì„¤ê³„

- ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ ë§Œë“¤ê¸°
    - ì„¸ë¶€ê¸°ëŠ¥ ì •ì˜ â†’ í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„
    - ì„œë¹„ìŠ¤ ë ˆì´ì–´: ë„ë©”ì¸ ëª¨ë¸(Domain Model)ì„ í™œìš©í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ í•µì‹¬ ê¸°ëŠ¥
    - ì„œë¹„ìŠ¤ ë¡œì§(í•µì‹¬ ê¸°ëŠ¥)ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(ë„ë©”ì¸ì„ í™œìš©í•œ ì„¸ë¶€ ê¸°ëŠ¥) ë¶„ë¦¬ êµ¬í˜„

- ì‹¤ìŠµì—ì„œëŠ” ì„œë¹„ìŠ¤ ë ˆì´ì–´ì—ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬í•˜ëŠ” ì•„í‚¤í…ì²˜
    
    
     1) Domain êµ¬ì¡° ì¬í¸ì„±
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-10-23 á„‹á…©á„’á…® 4.34.22.png](ch6%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%83%E1%85%A9%E1%86%BC(2)%20-%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%89%E1%85%B3%E1%86%B8%20e0e344373e8c4247ad5252e32c621a33/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-23_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_4.34.22.png)
    
    2) DTOíŒ¨í‚¤ì§€ ë° í´ë˜ìŠ¤ ìƒì„±
    
    - ProductDto í´ë˜ìŠ¤
        
        ```java
        package com.springboot.jpa.data.dto;
        
        public class ProductDto {
            private String name;
            private int price;
            private int stock;
        
            public ProductDto(String name, int price, int stock) {
                this.name = name;
                this.price = price;
                this.stock = stock;
            }
        
            public String getName() {
                return name;
            }
        
            public void setName(String name) {
                this.name = name;
            }
        
            public int getPrice() {
                return price;
            }
        
            public void setPrice(int price) {
                this.price = price;
            }
        
            public int getStock() {
                return stock;
            }
        
            public void setStock(int stock) {
                this.stock = stock;
            }
        }
        ```
        
    - ProductResponseDto í´ë˜ìŠ¤
        
        ```java
        package com.springboot.jpa.data.dto;
        
        public class ProductResponseDto {
            private Long number;
            private String name;
            private int price;
            private int stock;
        
            public ProductResponseDto(Long number, String name, int price, int stock) {
                this.number = number;
                this.name = name;
                this.price = price;
                this.stock = stock;
            }
        
            public Long getNumber() {
                return number;
            }
        
            public void setNumber(Long number) {
                this.number = number;
            }
        
            public String getName() {
                return name;
            }
        
            public void setName(String name) {
                this.name = name;
            }
        
            public int getPrice() {
                return price;
            }
        
            public void setPrice(int price) {
                this.price = price;
            }
        
            public int getStock() {
                return stock;
            }
        
            public void setStock(int stock) {
                this.stock = stock;
            }
        }
        ```
        
    - í•„ìš”ì— ë”°ë¼ ë¹Œë” ë©”ì„œë“œì™€ hashCode/equals ë©”ì„œë“œ ì¶”ê°€
        - ë¹Œë” ë©”ì„œë“œ: ë¹Œë” íŒ¨í„´ì„ ë”°ë¥´ëŠ” ë©”ì„œë“œ
        - ë°ì´í„° í´ë˜ìŠ¤ ì‚¬ìš©ì„ ìœ„í•´ ìƒì„±ì ì´ˆê¸°í™” â†’ ëª¨ë“  í•„ë“œ ê°’ ì…ë ¥í•˜ê±°ë‚˜ nullì„ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë‹¨ì ì„ ë³´ì™„í•˜ê¸° ìœ„í•´ ê³ ì•ˆëœ íŒ¨í„´
        
        ```java
        public class ProductResponseDto {
        	private Long number;
        	private String name;
        	private int price;
        	private int stock;
        
        	public static ProductResponseDtoBuilder builder(){
        		return new ProductResponseDtoBuilder();
        	}
        
        	public static class ProductResponseDtoBuilder {
        		private Long number;
        		private String name;
        		private int price;
        		private int stock;
        
        		ProductResponseDtoBuilder(){
        		}
        		
        		public ProductResponseDtoBuilder number(Long number){
        			this.number = number;
        			return this;
        		}
        
        		public ProductResponseDtoBuilder name(String name){
        			this.name = name;
        			return this;
        		}
        
        		public ProductResponseDtoBuilder price(int price){
        			this.price = price;
        			return this;
        		}
        
        		public ProductResponseDtoBuilder stock(int stocke){
        			this.stock = stock;
        			return this;
        		}
        
        		public ProductResponseDto build(){
        			return new ProductResponseDto(number, name, price, stock);
        		}
        
        		public String toString(){
        			return "ProductResponseDto.ProductResponseDtoBuilder(number=" + this.number + ",
        			name=" + this.name +", price=" + this.price + ", stock=" + this.stock + ")";
        		}
        	}
        }
        ```
        
    
    3) ProductService ì¸í„°í˜ì´ìŠ¤ ì‘ì„±
    
    ```java
    package com.springboot.jpa.service;
    
    import com.springboot.jpa.data.dto.ProductDto;
    import com.springboot.jpa.data.dto.ProductResponseDto;
    
    public interface ProductService {
        
    		ProductResponseDto getProduct(Long number);
    
        ProductResponseDto saveProduct(ProductDto productDto);
    
        ProductResponseDto changeProductName(Long number, String name) throws Exception;
    
        void deleteProduct(Long number) throws Exception;
    
    }
    ```
    
    - DAOì—ì„œ êµ¬í˜„í•œ ê¸°ëŠ¥ì„ ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤ì—ì„œ í˜¸ì¶œí•´ ê²°ê´ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ì‘ì—… ìˆ˜í–‰í•˜ë„ë¡ ì„¤ê³„
    - ë¦¬í„´íƒ€ì…: DTO - ì„œë¹„ìŠ¤ ë ˆì´ì–´ì—ì„œ DTO ê°ì²´ì™€ ì—”í‹°í‹° ê°ì²´ë¥¼ ê° ë ˆì´ì–´ì—ì„œ ë³€í™˜í•´ì„œ ì „ë‹¬
        
        ![IMG_2146.jpg](ch6%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%83%E1%85%A9%E1%86%BC(2)%20-%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%89%E1%85%B3%E1%86%B8%20e0e344373e8c4247ad5252e32c621a33/IMG_2146.jpg)
        
    - ë°ì´í„°ë² ì´ìŠ¤ì™€ ë°€ì ‘í•œ ê´€ë ¨ì´ ìˆëŠ” ë°ì´í„° ì•¡ì„¸ìŠ¤ ë ˆì´ì–´: ì—”í‹°í‹° ê°ì²´ ì‚¬ìš©
    - í´ë¼ì´ì–¸íŠ¸ì™€ ê°€ê¹Œì›Œì§€ëŠ” ë‹¤ë¥¸ ë ˆì´ì–´ì—ì„œëŠ” ë°ì´í„° êµí™˜ì‹œ DTOê°ì²´ ì‚¬ìš©
    - ì„œë¹„ìŠ¤ì™€ DAOì‚¬ì´ì—ì„  ì—”í‹°í‹°/DTO ì¤‘ ì–´ë–¤ ê²ƒìœ¼ë¡œ êµë¥˜í• ì§€ëŠ” ì‚¬ë‚´ ê·œì •ë§ˆë‹¤ ë‹¤ë¦„
    - ë‹¨ì¼ ë°ì´í„°ë‚˜ ì†ŒëŸ‰ì˜ ë°ì´í„° ì „ë‹¬í•˜ëŠ” ê²½ìš° DTOë‚˜ ì—”í‹°í‹° ì‚¬ìš©í•˜ì§€ ì•Šê¸°ë„ í•¨

### 12-1. ë¡¬ë³µ(1) - ë°˜ë³µë˜ëŠ” ì½”ë“œì˜ ì‘ì„±ì„ ìƒëµí•˜ëŠ” ë°©ë²•

- ë°ì´í„°(ëª¨ë¸) í´ë˜ìŠ¤ ìƒì„±ì‹œ, ë°˜ë³µ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë¥¼ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ëŒ€ì²´í•˜ëŠ” ê¸°ëŠ¥ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
- ë¡¬ë³µì˜ ì¥ì 
    - ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ìœ¼ë¡œ ì½”ë“œ ìë™ ìƒì„± â†’ ìƒì‚°ì„± í–¥ìƒ
    - ë°˜ë³µë˜ëŠ” ì½”ë“œ ìƒëµ â†’ ê°€ë…ì„± í–¥ìƒ
    - ìœ ì§€ë³´ìˆ˜ì— ìš©ì´
- ë¡¬ë³µ ì‚¬ìš©ë°©ë²•
    
    
    1) ë¡¬ë³µ ì˜ì¡´ì„± ì¶”ê°€
    
    Maven â†’ pom.xmlì— ì˜ì¡´ì„± ì¶”ê°€
    
    ```java
    <dependency>
         <groupId>org.projectlombok</groupId>
         <artifactId>lombok</artifactId>
         <optional>true</optional>
    </dependency>
    ```
    
    2) Lombok í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-10-26 á„‹á…©á„’á…® 3.59.38.png](ch6%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%83%E1%85%A9%E1%86%BC(2)%20-%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%89%E1%85%B3%E1%86%B8%20e0e344373e8c4247ad5252e32c621a33/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.59.38.png)
    
    - ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ìˆë‹¤ë©´ installedì—ì„œ í™•ì¸ê°€ëŠ¥
    
    3) Setting ì²´í¬
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-10-26 á„‹á…©á„’á…® 4.00.44.png](ch6%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%E1%84%87%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%20%E1%84%8B%E1%85%A7%E1%86%AB%E1%84%83%E1%85%A9%E1%86%BC(2)%20-%20%E1%84%89%E1%85%B5%E1%86%AF%E1%84%89%E1%85%B3%E1%86%B8%20e0e344373e8c4247ad5252e32c621a33/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_4.00.44.png)
    
    - [Build, Execution, Develoyment] > [Compiler] > [Annotation Processors]
    - Enable annotation processing ì²´í¬
    

### 12-2. ë¡¬ë³µ(2) - annotation

```java
package com.springboot.jpa.data.entity;

//importë¬¸..

@Entity
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@Table(name = "product")
public class Product {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long number;

    @Column(nullable = false)
    private String name;

    @Column(nullable = false)
    private Integer price;

    @Column(nullable = false)
    private Integer stock;

    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;

}
```

- @Getter & @Setter : Getter/Setter ë©”ì†Œë“œ
- ìƒì„±ì ë©”ì†Œë“œ
    - NoArgsConstructor: ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ìƒì„±ì ìë™ ìƒì„±
    - AllArgsConstructor: ëª¨ë“  í•„ë“œë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ê°–ëŠ” ìƒì„±ì ìë™ ìƒì„±
    - RequiredArgsConstructor: í•„ë“œ ì¤‘ finalì´ë‚˜ @NotNullì´ ì„¤ì •ëœ ë³€ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ê°–ëŠ” ìƒì„±ìë¥¼ ìë™ ìƒì„±
- @ToString: toString() ë©”ì„œë“œ ìƒì„± ì–´ë…¸í…Œì´ì…˜
    - exclude ì˜µì…˜: íŠ¹ì • í•„ë“œë¥¼ ìë™ìƒì„±ì—ì„œ ì œì™¸
- @EqualsAndHashCode: ê°ì²´ì˜ ë™ë“±ì„±ê³¼ ë™ì¼ì„±ì„ ë¹„êµí•˜ëŠ” ì—°ì‚° ë©”ì„œë“œ ìƒì„±
    - equals: ë‘ ê°ì²´ì˜ ë‚´ìš©ì´ ê°™ì€ì§€ ë™ë“±ì„±ì„ ë¹„êµ
    - hashCode: ë‘ ê°ì²´ê°€ ê°™ì€ ê°ì¹˜ì¸ì§€ ë™ì¼ì„±ì„ ë¹„êµ
    - callSuper ì†ì„±: trueì¼ ê²½ìš° ë¶€ëª¨ ê°ì²´ì˜ ê°’ë„ ë¹„êµ ëŒ€ìƒì— í¬í•¨
- @Data: @Getter & @Setter, @RequiredArgsConstructor, @ToString, @EqualsAndHashCodeë¥¼ ëª¨ë‘ í¬ê´„í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜
- ğŸŒ¶ï¸Â ë¡¬ë³µ ì¡°ê¸ˆ ë” í†ºì•„ë³´ê¸° ğŸŒ¶ï¸
    - toString() ë©”ì„œë“œ
    
    ```java
    public String toString() {
    	return "Product(number=" + this.getNumber() +", name=" + this.getName() + ", price="
    	+ this.getPrice() +", stock=" + this.getStock() + ", createdAt=" + this.getCreatedAt()
    	+ ", updatedAt=" + this.getUpdatedAt() + ")";
    }
    ```
    

- ë™ë“±ì„±ê³¼ ë™ì¼ì„±
    - ë™ë“±ì„±: ë¹„êµ ëŒ€ìƒì´ ë˜ëŠ” ë‘ ê°ì²´ê°€ ê°€ì§„ ê°’ì´ ê°™ìŒì„ ì˜ë¯¸
    - ë™ì¼ì„±: ë‘ ê°ì²´ê°€ ê°™ì€ ê°ì²´ì„ì„ ì˜ë¯¸