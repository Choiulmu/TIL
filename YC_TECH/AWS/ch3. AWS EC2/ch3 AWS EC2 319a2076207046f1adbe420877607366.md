# ch3. AWS EC2

### 1. Amazon EC2(Elastic Compute Cloud)

- AWS의 가장 대표적인 컴퓨팅 서비스
- 가상화된 컴퓨팅 인프라 제공(Dedicated 서버 옵션도 가능)
- 온디맨드, 대규모 확장, 글로벌 확장 가능
- 많은 AWS서비스들이 내부적으로 EC2 인스터스 사용 가능

### 2. Amazon EC2 인스턴스

- 하나의 인스턴스 = 한 대의 서버 컴퓨터
- CPU, Memory, Storage, Networking, Firewall, OS, Package, Middleware, Application ⊂ 인스턴스
- 인스턴스 시작 > Amazon EC2 인스턴스 생성 가능
    
    ![스크린샷 2023-10-26 오후 12.22.05.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_12.22.05.png)
    

### 3. AMI(Amazon Machine Image)

![스크린샷 2023-10-26 오후 3.05.53.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.05.53.png)

![스크린샷 2023-10-26 오후 3.06.20.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.06.20.png)

- AMI: 가상 환경 이미지
- AWS에서 미리 구성된 다양한 AMI 제공
    - OS 선택 가능
    - 특정 목적을 위한 환경이 구성된 AMI(딥러닝, Database 등)
- AWS Market Place: 신뢰할 수 있는 3rd Party에서 제공하는 AMI
- 커뮤니티 AMI: 일반 사용자들이 AMI 제작 및 배포(보안 위험 존재)

### 4. EC2 인스턴스 유형

![스크린샷 2023-10-26 오후 3.07.24.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.07.24.png)

- 사용 목적에 따라 다양한 사양의 인스턴스 선택 가능
    - 범용: 다양한 컴퓨팅 리소스의 밸런스 좋음(웹서버 만들 때 가장 많이 사용)
    - 컴퓨팅 최적화: 고성능 프로세서 사용시(복잡한 계산, 미디어에 관한 작업)
    - 메모리 최적화: 대규모 메모리 사용시
    - 스토리지 최적화: 대규모 스토리지의 I/O 성능이 중요할 시
    - 가속화된 컴퓨팅: 딥러닝, 그래픽 처리 등의 목적
        
        ![스크린샷 2023-10-26 오후 12.33.21.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_12.33.21.png)
        
    

### 5. EC2 요금

![스크린샷 2023-10-26 오후 3.07.55.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.07.55.png)

- 고급 세부 정보 항목에 명시
- 프리티어, 온디맨드, 스팟 인스턴스, 예약 인스턴스, Saving Plans, 전용 호스팅
- 기타비용
    - 네트워크 Outbound요금: EC2 인스턴스 내에서 외부로 데이터 전송시 사용되는 네트워크에 대한 요금
    - 스토리지 요금(EBS등)
    - 모니터링 요금(Cloud Watch 등): EC2 인스턴스에서 발생하는 지표를 추가 ver으로 확인하고 싶을 때 추가 요금지불 후 사용 가능
- 약정이 길수록, 선결제할 수록 저렴
- 요금별 특징
    
    ![스크린샷 2023-10-26 오후 12.35.32.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_12.35.32.png)
    
    ![스크린샷 2023-10-26 오후 12.35.42.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_12.35.42.png)
    
    ![스크린샷 2023-10-26 오후 2.00.56.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_2.00.56.png)
    
    ![스크린샷 2023-10-26 오후 2.01.42.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_2.01.42.png)
    
    ![스크린샷 2023-10-26 오후 2.02.25.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_2.02.25.png)
    
    ![스크린샷 2023-10-26 오후 2.03.01.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_2.03.01.png)
    

### 6. 키페어와 보안그룹

- EC2는 기본적으로 공개키 암호화 방식 사용

[키페어]

- EC2 인스턴스 접속 시 자격증명을 위한 방시
- EC2 생성 시 Public Key는 인스턴스 내부에 저장
- 사용자는 Private Key를 다운로드 받아 인스턴스 접속 시 사용

![스크린샷 2023-10-26 오후 3.09.37.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.09.37.png)

![스크린샷 2023-10-26 오후 3.09.58.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.09.58.png)

- 인스턴스 생성 시 기존 키 페어를 활용하거나 새로운 키 페어 생성 가능
- Private Key 파일은 유실시 복구 불가

[보안그룹]

![스크린샷 2023-10-26 오후 2.15.43.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_2.15.43.png)

![스크린샷 2023-10-26 오후 3.10.16.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.10.16.png)

- EC2 인스턴스에 대한 가상 방화벽 역할
- 보안그룹은 아웃바운드보다 “인바운드”를 더 많이 관리
    - 인바운드 규칙: 인스턴스로 들어오는 트래픽 제어
    - 아웃바운드 규칙: 인스턴스에서 나가는 트래픽 제어
- 프로토콜, 포트, 소스 등을 지정하여 허용 규칙 생성
    - 프로토콜: SSH, HTTP, HTTPS 등
    - 포트: 인스턴스에 어떤 포트를 허용할지
    - 소스: 외부의 모든 곳/특정 IP/특정 IP 대역에서만 접속 허용
- 규칙이 생성되지 않은 모든 네트워크 접근은 허용X → 반드시 보안그룹의 허용 규칙을 똑바로 설계할 것
- 추가 설명(IP와 Port)
    - IP: 특정 서버(Host)에 접근하기 위한 네트워크 주소 [집주소]
    - Port: 특정 서버 내의 프로세스를 접근하기위한 네트워크 주소 [집 내 방의 주소]

### 7. EBS(Elastic Block Storage)

- EC2 인스턴스에 연결 가능한 블록 스토리지
- EC2 인스턴스 종료시에도 데이터 영구 저장 위해 활용
- 하나의 EC2 인스턴스에 복수의 EBS 볼륨 연결 가능
    
    ![스크린샷 2023-10-26 오후 2.29.34.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_2.29.34.png)
    
- 동일한 Ability zone 내의 인스턴스의 EBS 볼륨 연결만 가능
    
    
    ![스크린샷 2023-10-26 오후 2.29.53.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_2.29.53.png)
    
    ![스크린샷 2023-10-26 오후 2.30.05.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_2.30.05.png)
    
    ![스크린샷 2023-10-26 오후 3.11.30.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.11.30.png)
    
- EBS 볼륨 생성 시 용량 및 볼륨 유형 선택
    - SSD: 범용 SSD, 프로비저닝 된 IOPS SSD(높은 처리량 보장 - 데이터베이스/IO 작업 많은 경우 사용)
    - HDD: 콜드 HDD, 처리량 최적화 HDD
- 종료 시 삭제 옵션
    - EC2 인스턴스 종료시 EBS 볼륨을 함께 삭제
    - 루트 볼륨의 경우에는 Default로 삭제 되도록 선택
    - ‘아니오’ 선택 시 EC2 인스턴스 종료 시에도 EBS 볼륨은 유지됨
    

### 8. 사용자 데이터

![스크린샷 2023-10-26 오후 3.12.26.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_3.12.26.png)

- EC2 인스턴스가 처음 생성될 때 부팅 시 실행되는 shell 스크립트
- 공통적인 설정 작업을 자동으로 수행하는 데 활용
    - java, nodejs 등의 패키지 설치
    - 웹 서버, 데이터베이스 등의 미들웨어 설치 및 설정
- 리눅스와 윈도우 인스턴스에 모두 적용 가능

### 9. EC2 인스턴스 접속

- 관리 콘솔에서 직접 EC2 인스턴스 접속
(EC2 인스턴스 연결)

![스크린샷 2023-10-26 오후 8.09.17.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.09.17.png)

![스크린샷 2023-10-26 오후 8.11.12.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.11.12.png)

- SSH 클라이언트
    - 가장 많이 사용⭐️
    - 리눅스 기반의 인스턴스에 접속할 때 사용
    - 다양한 종류의 무료/유료 SSH 클라이언트 활용 가능
    
    ---
    
    - Remote host: 퍼블릭 IPv4 주소
    - Specify username: ec2-user
    - Use Private Key에 체크 후 .pem 파일 업로드

![스크린샷 2023-10-26 오후 8.10.05.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.10.05.png)

![스크린샷 2023-10-26 오후 8.12.41.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.12.41.png)

- RDP 클라이언트: Remote Desktop을 활용해 접속 가능

- EC2 인스턴스 접속시 OS별로 username이 상이
    - Amazon Linux: ec2-user
    - Ubuntu: ubuntu
    - Windows: Administrator

### 10. EC2 인스턴스 정보

- EC2 인스턴스 요약 정보: 퍼블릭 IP주소, 프라이빗 IP주소 등
- EC2 인스턴스 세부 정보: 플랫폼(OS), AMI ID, 키 페어 이름, 소유자 등
- EC2 인스턴스 추가 정보: 보안, 네트워킹, 스토리지, 상태 검사, 모니터링, 태그 카테고리
- 인스턴스 ID > 하단 세부정보와 카테고리 확인

### 11. EC2 인스턴스 수명주기

![스크린샷 2023-10-26 오후 8.22.29.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.22.29.png)

- 종료 됨 = 삭제 = 다시 실행 불가
    
    ![스크린샷 2023-10-26 오후 8.23.10.png](ch3%20AWS%20EC2%20319a2076207046f1adbe420877607366/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-26_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.23.10.png)
    

### 12. AWS S3(Simple Storage Service)

- 객체 스토리지 서비스
- EC2와 함께 AWS 핵심 서비스(여타 서비스들이 S3를 활용)
- 원하는 수준의 데이터 저장 가능: 1개 객체 최대 사이즈 5TB
- 웹 서비스, 빅데이터 저장, 아카이빙 등 다양한 목적으로 활용 가능

- S3 객체
    - S3 저장의 기본 단위 - 파일
    - 객체는 파일과 파일에 대한 메타 데이터의 묶음(버전, 암호화 정보, 스토리지 클래스, ACL 등)
- S3 버킷
    - 객체를 저장하는 Container(모든 객체는 특정 버킷 내에서 저장)
    - 버킷의 이름은 Globally Unique해야 함
    - 버킷은 하나의 리전 내에서 생성됨 - 기본적으로 객체는 데이터 유실 방지를 위해 하나의 리전 내에서만 복제 됨(멀티 리전 복제 설정 가능)
    
- S3가격
    - 스토리지 비용, 요청 및 데이터 검색 비용, 데이터 전송 비용, 복제 비용 등 다양한 비용이 집계되어 청구